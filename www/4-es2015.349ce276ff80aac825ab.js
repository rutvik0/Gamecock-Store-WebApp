(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{X3zk:function(o,e,t){"use strict";t.r(e),t.d(e,"LoginPageModule",(function(){return g}));var n=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),c=t("mrSG"),l=t("Osjz"),a=t("fXoL"),u=t("Zr+e");const b=[{path:"",component:(()=>{class o{constructor(o,e,t,n){this.router=o,this.formBuilder=e,this.toastController=t,this.itemService=n,this.db=l.firestore(),this.imgfile="/assets/white.png"}ngOnInit(){this.new_item_form=this.formBuilder.group({email:new i.b("",i.l.required),password:new i.b("",i.l.required)})}signup(){this.router.navigate(["/signup"])}login(o){console.log(o.email+" "+o.password);var e=this,t=o.email,n=o.password;l.auth().signInWithEmailAndPassword(t,n).then((function(o){var t=l.auth().currentUser;console.log("login succeeded"),console.log(t.uid),e.db.collection("usertype").where("uid","==",t.uid).get().then((function(o){o.forEach((function(o){console.log(o.id," => ",o.data());var t=o.data().usertype;console.log("usertype:"+t),e.itemService.setUsertype(t)}))})).catch((function(o){console.log("Error getting documents: ",o)})),e.presentToast(),e.router.navigate(["/tabs/tab1"])})).catch((function(o){var e=o.code;console.log(e),"auth/wrong-password"===e?alert("Wrong password."):"auth/user-not-found"===e&&alert("User does not exist"),console.log(o)})),this.new_item_form.reset()}presentToast(){return Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({color:"success",message:"Login Successful",position:"top",duration:2e3})).present()}))}loginGoogle(){var o=this;console.log("google login");var e=new l.auth.GoogleAuthProvider;e.addScope("profile"),e.addScope("email"),l.auth().signInWithPopup(e).then((function(e){console.log(e.user.uid),o.itemService.setUsertype("visitor"),console.log("login succeeded"),o.router.navigate(["/tabs/tab1"])}))}}return o.\u0275fac=function(e){return new(e||o)(a.Jb(s.g),a.Jb(i.a),a.Jb(r.L),a.Jb(u.a))},o.\u0275cmp=a.Db({type:o,selectors:[["app-login"]],decls:22,vars:3,consts:[["mode","ios"],["slot","end"],[3,"click"],[1,"ion-padding"],[3,"src"],[3,"formGroup","submit"],["color","primary","position","floating"],["type","text","formControlName","email","required",""],["type","password","formControlName","password","required",""],["expand","block","type","submit",1,"submit-btn",3,"disabled"],["color","secondary","expand","block",1,"submit-btn",3,"click"]],template:function(o,e){1&o&&(a.Mb(0,"ion-header"),a.Mb(1,"ion-toolbar",0),a.Mb(2,"ion-title"),a.hc(3,"Login"),a.Lb(),a.Mb(4,"ion-buttons",1),a.Mb(5,"ion-button",2),a.Ub("click",(function(){return e.signup()})),a.hc(6," Create Account "),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Mb(7,"ion-content",3),a.Kb(8,"ion-img",4),a.Mb(9,"form",5),a.Ub("submit",(function(){return e.login(e.new_item_form.value)})),a.Mb(10,"ion-item"),a.Mb(11,"ion-label",6),a.hc(12,"Email"),a.Lb(),a.Kb(13,"ion-input",7),a.Lb(),a.Mb(14,"ion-item"),a.Mb(15,"ion-label",6),a.hc(16,"Password"),a.Lb(),a.Kb(17,"ion-input",8),a.Lb(),a.Mb(18,"ion-button",9),a.hc(19,"Login"),a.Lb(),a.Lb(),a.Mb(20,"ion-button",10),a.Ub("click",(function(){return e.loginGoogle()})),a.hc(21,"Login using Google"),a.Lb(),a.Lb()),2&o&&(a.zb(8),a.bc("src",e.imgfile),a.zb(1),a.bc("formGroup",e.new_item_form),a.zb(9),a.bc("disabled",!e.new_item_form.valid))},directives:[r.i,r.D,r.B,r.g,r.f,r.h,r.k,i.m,i.h,i.d,r.m,r.p,r.l,r.K,i.g,i.c,i.k],styles:[""]}),o})()}];let d=(()=>{class o{}return o.\u0275mod=a.Hb({type:o}),o.\u0275inj=a.Gb({factory:function(e){return new(e||o)},imports:[[s.i.forChild(b)],s.i]}),o})(),g=(()=>{class o{}return o.\u0275mod=a.Hb({type:o}),o.\u0275inj=a.Gb({factory:function(e){return new(e||o)},imports:[[n.b,i.e,r.E,i.j,d]]}),o})()}}]);