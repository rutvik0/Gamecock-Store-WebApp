function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,o,t){return o&&_defineProperties(e.prototype,o),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{X3zk:function(e,o,t){"use strict";t.r(o),t.d(o,"LoginPageModule",(function(){return m}));var n,i,r,s=t("ofXK"),a=t("3Pt+"),c=t("TEn/"),l=t("tyNb"),u=t("mrSG"),b=t("Osjz"),d=t("fXoL"),f=t("Zr+e"),p=[{path:"",component:(n=function(){function e(o,t,n,i){_classCallCheck(this,e),this.router=o,this.formBuilder=t,this.toastController=n,this.itemService=i,this.db=b.firestore(),this.imgfile="/assets/white.png"}return _createClass(e,[{key:"ngOnInit",value:function(){this.new_item_form=this.formBuilder.group({email:new a.b("",a.l.required),password:new a.b("",a.l.required)})}},{key:"signup",value:function(){this.router.navigate(["/signup"])}},{key:"login",value:function(e){console.log(e.email+" "+e.password);var o=this,t=e.email,n=e.password;b.auth().signInWithEmailAndPassword(t,n).then((function(e){var t=b.auth().currentUser;console.log("login succeeded"),console.log(t.uid),o.db.collection("usertype").where("uid","==",t.uid).get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data());var t=e.data().usertype;console.log("usertype:"+t),o.itemService.setUsertype(t)}))})).catch((function(e){console.log("Error getting documents: ",e)})),o.presentToast(),o.router.navigate(["/tabs/tab1"])})).catch((function(e){var o=e.code;console.log(o),"auth/wrong-password"===o?alert("Wrong password."):"auth/user-not-found"===o&&alert("User does not exist"),console.log(e)})),this.new_item_form.reset()}},{key:"presentToast",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({color:"success",message:"Login Successful",position:"top",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"loginGoogle",value:function(){var e=this;console.log("google login");var o=new b.auth.GoogleAuthProvider;o.addScope("profile"),o.addScope("email"),b.auth().signInWithPopup(o).then((function(o){console.log(o.user.uid),e.itemService.setUsertype("visitor"),console.log("login succeeded"),e.router.navigate(["/tabs/tab1"])}))}}]),e}(),n.\u0275fac=function(e){return new(e||n)(d.Jb(l.g),d.Jb(a.a),d.Jb(c.L),d.Jb(f.a))},n.\u0275cmp=d.Db({type:n,selectors:[["app-login"]],decls:22,vars:3,consts:[["mode","ios"],["slot","end"],[3,"click"],[1,"ion-padding"],[3,"src"],[3,"formGroup","submit"],["color","primary","position","floating"],["type","text","formControlName","email","required",""],["type","password","formControlName","password","required",""],["expand","block","type","submit",1,"submit-btn",3,"disabled"],["color","secondary","expand","block",1,"submit-btn",3,"click"]],template:function(e,o){1&e&&(d.Mb(0,"ion-header"),d.Mb(1,"ion-toolbar",0),d.Mb(2,"ion-title"),d.hc(3,"Login"),d.Lb(),d.Mb(4,"ion-buttons",1),d.Mb(5,"ion-button",2),d.Ub("click",(function(){return o.signup()})),d.hc(6," Create Account "),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Mb(7,"ion-content",3),d.Kb(8,"ion-img",4),d.Mb(9,"form",5),d.Ub("submit",(function(){return o.login(o.new_item_form.value)})),d.Mb(10,"ion-item"),d.Mb(11,"ion-label",6),d.hc(12,"Email"),d.Lb(),d.Kb(13,"ion-input",7),d.Lb(),d.Mb(14,"ion-item"),d.Mb(15,"ion-label",6),d.hc(16,"Password"),d.Lb(),d.Kb(17,"ion-input",8),d.Lb(),d.Mb(18,"ion-button",9),d.hc(19,"Login"),d.Lb(),d.Lb(),d.Mb(20,"ion-button",10),d.Ub("click",(function(){return o.loginGoogle()})),d.hc(21,"Login using Google"),d.Lb(),d.Lb()),2&e&&(d.zb(8),d.bc("src",o.imgfile),d.zb(1),d.bc("formGroup",o.new_item_form),d.zb(9),d.bc("disabled",!o.new_item_form.valid))},directives:[c.i,c.D,c.B,c.g,c.f,c.h,c.k,a.m,a.h,a.d,c.m,c.p,c.l,c.K,a.g,a.c,a.k],styles:[""]}),n)}],g=((r=function e(){_classCallCheck(this,e)}).\u0275mod=d.Hb({type:r}),r.\u0275inj=d.Gb({factory:function(e){return new(e||r)},imports:[[l.i.forChild(p)],l.i]}),r),m=((i=function e(){_classCallCheck(this,e)}).\u0275mod=d.Hb({type:i}),i.\u0275inj=d.Gb({factory:function(e){return new(e||i)},imports:[[s.b,a.e,c.E,a.j,g]]}),i)}}]);